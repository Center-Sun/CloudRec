(self.webpackChunk=self.webpackChunk||[]).push([[4992],{8751:function(M,v,e){"use strict";e.d(v,{Z:function(){return f}});var E=e(87462),n=e(62435),r={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M699 353h-46.9c-10.2 0-19.9 4.9-25.9 13.3L469 584.3l-71.2-98.8c-6-8.3-15.6-13.3-25.9-13.3H325c-6.5 0-10.3 7.4-6.5 12.7l124.6 172.8a31.8 31.8 0 0051.7 0l210.6-292c3.9-5.3.1-12.7-6.4-12.7z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"check-circle",theme:"outlined"},l=r,a=e(84089),s=function(o,_){return n.createElement(a.Z,(0,E.Z)({},o,{ref:_,icon:l}))},c=n.forwardRef(s),f=c},18429:function(M,v,e){"use strict";e.d(v,{Z:function(){return f}});var E=e(87462),n=e(62435),r={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64c247.4 0 448 200.6 448 448S759.4 960 512 960 64 759.4 64 512 264.6 64 512 64zm0 76c-205.4 0-372 166.6-372 372s166.6 372 372 372 372-166.6 372-372-166.6-372-372-372zm128.01 198.83c.03 0 .05.01.09.06l45.02 45.01a.2.2 0 01.05.09.12.12 0 010 .07c0 .02-.01.04-.05.08L557.25 512l127.87 127.86a.27.27 0 01.05.06v.02a.12.12 0 010 .07c0 .03-.01.05-.05.09l-45.02 45.02a.2.2 0 01-.09.05.12.12 0 01-.07 0c-.02 0-.04-.01-.08-.05L512 557.25 384.14 685.12c-.04.04-.06.05-.08.05a.12.12 0 01-.07 0c-.03 0-.05-.01-.09-.05l-45.02-45.02a.2.2 0 01-.05-.09.12.12 0 010-.07c0-.02.01-.04.06-.08L466.75 512 338.88 384.14a.27.27 0 01-.05-.06l-.01-.02a.12.12 0 010-.07c0-.03.01-.05.05-.09l45.02-45.02a.2.2 0 01.09-.05.12.12 0 01.07 0c.02 0 .04.01.08.06L512 466.75l127.86-127.86c.04-.05.06-.06.08-.06a.12.12 0 01.07 0z"}}]},name:"close-circle",theme:"outlined"},l=r,a=e(84089),s=function(o,_){return n.createElement(a.Z,(0,E.Z)({},o,{ref:_,icon:l}))},c=n.forwardRef(s),f=c},56477:function(M,v,e){"use strict";e.d(v,{Z:function(){return f}});var E=e(87462),n=e(62435),r={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M690 405h-46.9c-10.2 0-19.9 4.9-25.9 13.2L512 563.6 406.8 418.2c-6-8.3-15.6-13.2-25.9-13.2H334c-6.5 0-10.3 7.4-6.5 12.7l178 246c3.2 4.4 9.7 4.4 12.9 0l178-246c3.9-5.3.1-12.7-6.4-12.7z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"down-circle",theme:"outlined"},l=r,a=e(84089),s=function(o,_){return n.createElement(a.Z,(0,E.Z)({},o,{ref:_,icon:l}))},c=n.forwardRef(s),f=c},61011:function(M,v,e){"use strict";e.d(v,{Z:function(){return f}});var E=e(87462),n=e(62435),r={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M666.7 505.5l-246-178A8 8 0 00408 334v46.9c0 10.2 4.9 19.9 13.2 25.9L566.6 512 421.2 617.2c-8.3 6-13.2 15.6-13.2 25.9V690c0 6.5 7.4 10.3 12.7 6.5l246-178c4.4-3.2 4.4-9.8 0-13z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"right-circle",theme:"outlined"},l=r,a=e(84089),s=function(o,_){return n.createElement(a.Z,(0,E.Z)({},o,{ref:_,icon:l}))},c=n.forwardRef(s),f=c},28058:function(M,v,e){"use strict";e.d(v,{Z:function(){return f}});var E=e(87462),n=e(62435),r={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M464 720a48 48 0 1096 0 48 48 0 10-96 0zm16-304v184c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V416c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8zm475.7 440l-416-720c-6.2-10.7-16.9-16-27.7-16s-21.6 5.3-27.7 16l-416 720C56 877.4 71.4 904 96 904h832c24.6 0 40-26.6 27.7-48zm-783.5-27.9L512 239.9l339.8 588.2H172.2z"}}]},name:"warning",theme:"outlined"},l=r,a=e(84089),s=function(o,_){return n.createElement(a.Z,(0,E.Z)({},o,{ref:_,icon:l}))},c=n.forwardRef(s),f=c},7401:function(M,v,e){"use strict";e.r(v);var E=e(15009),n=e.n(E),r=e(99289),l=e.n(r),a=e(5574),s=e.n(a),c=e(29297),f=e(96987),P=e(94032),o=e(10736),_=e(39380),I=e(92016),$=e(25593),V=e(68872),w=e(71230),F=e(86250),U=e(42075),W=e(83622),z=e(15746),b=e(85137),y=e(62435),J=e(61194),t=e(86074),S=$.Z.Title,Q=function(){var X=(0,I.useLocation)(),Y=new URLSearchParams(X.search),G=(0,y.useState)(Y.get("id")),q=s()(G,1),x=q[0],T=V.ZP.useMessage(),H=s()(T,2),L=H[0],ee=H[1],te=(0,y.useState)(!1),N=s()(te,2),ne=N[0],R=N[1],g=(0,y.useState)(""),D=s()(g,2),p=D[0],j=D[1],K=(0,y.useState)(""),i=s()(K,2),re=i[0],A=i[1],_e=(0,y.useState)({}),se=s()(_e,2),ce=se[0],ae=se[1],de=(0,y.useState)(1),le=s()(de,2),me=le[0],ve=le[1],fe=(0,y.useState)(!1),ie=s()(fe,2),Ee=ie[0],ue=ie[1],oe=(0,y.useRef)({}),ge=function(h){j(h)},he=function(h){A(h)},k=function(){var C=l()(n()().mark(function h(d){var O,u,m;return n()().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return R(!0),Z.next=3,(0,o.queryLatestById)({ruleId:d});case 3:O=Z.sent,R(!1),(O.code===200||O.msg==="success")&&(u=O.content,j((u==null?void 0:u.ruleRego)||""),ve(u==null?void 0:u.isDraft),m=u!=null&&u.input?JSON.parse(u==null?void 0:u.input):{},A(JSON.stringify(m,null,4)||""));case 6:case"end":return Z.stop()}},h)}));return function(d){return C.apply(this,arguments)}}();(0,y.useEffect)(function(){x&&k(Number(x))},[x]);var Ce=function(){var C=l()(n()().mark(function h(){var d;return n()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,(0,o.evaluateRego)({ruleRego:p,input:re});case 2:d=u.sent,d.code===200||d.msg==="success"?(L.success("\u6267\u884C\u6210\u529F"),ae((d==null?void 0:d.content)||{})):d.code!==200&&d.msg!=="success"&&ae(d||{});case 4:case"end":return u.stop()}},h)}));return function(){return C.apply(this,arguments)}}(),De=function(){var C=l()(n()().mark(function h(){var d,O;return n()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return d={ruleId:Number(x),isDraft:1,ruleRego:p},m.next=3,(0,o.saveRego)(d);case 3:if(O=m.sent,!(O.code===200||O.msg==="success")){m.next=8;break}return m.next=7,k(Number(x));case 7:L.success("\u4FDD\u5B58\u6210\u529F");case 8:case"end":return m.stop()}},h)}));return function(){return C.apply(this,arguments)}}(),Oe=function(){var C=l()(n()().mark(function h(){var d,O;return n()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return d={ruleId:Number(x),isDraft:0,ruleRego:p},m.next=3,(0,o.saveRego)(d);case 3:if(O=m.sent,!(O.code===200||O.msg==="success")){m.next=8;break}return m.next=7,k(Number(x));case 7:L.success("\u63D0\u4EA4\u6210\u529F");case 8:case"end":return m.stop()}},h)}));return function(){return C.apply(this,arguments)}}(),Me=function(){oe.current={ruleId:x},ue(!0)};return(0,t.jsxs)(_._z,{ghost:!0,title:!1,loading:ne,style:{paddingInline:12},children:[ee,(0,t.jsx)(w.Z,{children:(0,t.jsx)(F.Z,{justify:"end",style:{width:"100%"},children:(0,t.jsxs)(U.Z,{children:[(0,t.jsxs)(W.ZP,{type:"link",style:{color:"rgba(54, 110, 255, 1)"},href:"https://cloudrec.yuque.com/org-wiki-cloudrec-iew3sz/hocvhx/hiw98ff7fzdn3exc",target:"_blank",children:[(0,t.jsx)("img",{src:f.Uk.linkIcon,style:{height:14},alt:"LINK_ICON"}),"\u914D\u7F6E\u8BF4\u660E"]}),(0,t.jsx)(W.ZP,{type:"primary",onClick:function(){return Ce()},children:"\u6267\u884C"}),me===1&&(0,t.jsx)(W.ZP,{type:"primary",onClick:function(){return De()},children:"\u4FDD\u5B58"}),(0,t.jsx)(W.ZP,{type:"primary",onClick:function(){return Oe()},children:"\u63D0\u4EA4"})]})})}),(0,t.jsxs)(w.Z,{gutter:20,children:[(0,t.jsxs)(z.Z,{md:14,span:24,children:[(0,t.jsx)(S,{level:5,children:"The Rego PlayGround"}),(0,t.jsx)(c.mi,{editorKey:"regoEditor",value:p,onChange:ge,editorStyle:{height:"740px"}})]}),(0,t.jsxs)(z.Z,{md:10,span:24,children:[(0,t.jsx)(S,{level:5,children:"INPUT"}),(0,t.jsx)(c.q9,{editorStyle:{height:"420px"},editorKey:"inputEditor",value:re,onChange:he}),(0,t.jsx)(S,{style:{marginTop:8},level:5,children:"OUTPUT"}),(0,t.jsx)(c.Wy,{viewerStyle:{height:"280px"},value:ce})]})]}),(0,t.jsxs)(b.Z.Group,{shape:"square",style:{insetInlineEnd:2,top:168,bottom:32},children:[(0,t.jsx)(b.Z,{onClick:function(){return Me()},className:J.Z.floatButton,icon:(0,t.jsx)("div",{style:{fontSize:14},children:"\u5386\u53F2"})}),(0,t.jsx)(b.Z,{className:J.Z.floatButton,icon:(0,t.jsx)("div",{style:{fontSize:14},children:"\u5C5E\u6027"})})]}),(0,t.jsx)(P.Z,{noteDrawerVisible:Ee,setNoteDrawerVisible:ue,noteDrawerInfo:oe.current,requestRuleDetailById:k})]})};v.default=Q},94032:function(M,v,e){"use strict";var E=e(97857),n=e.n(E),r=e(15009),l=e.n(r),a=e(99289),s=e.n(a),c=e(5574),f=e.n(c),P=e(29297),o=e(10736),_=e(70989),I=e(93410),$=e(92016),V=e(68872),w=e(83622),F=e(85265),U=e(96486),W=e.n(U),z=e(62435),b=e(86074),y=function(t){var S=t.noteDrawerVisible,Q=t.setNoteDrawerVisible,B=t.noteDrawerInfo,X=t.requestRuleDetailById,Y=V.ZP.useMessage(),G=f()(Y,2),q=G[0],x=G[1],T=(0,$.useIntl)(),H=function(){Q(!1)},L=function(){H()},ee=(0,z.useRef)(),te=function(){var R=s()(l()().mark(function g(D){var p,j;return l()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return p={ruleId:B==null?void 0:B.ruleId,isDraft:0,ruleRego:D==null?void 0:D.ruleRego},i.next=3,(0,o.saveRego)(p);case 3:if(j=i.sent,!(j.code===200||j.msg==="success")){i.next=9;break}return q.success(T.formatMessage({id:"rule.message.text.version.rollback.success"})),i.next=8,X(Number(B==null?void 0:B.ruleId));case 8:L();case 9:case"end":return i.stop()}},g)}));return function(D){return R.apply(this,arguments)}}(),N=[{title:T.formatMessage({id:"rule.module.text.version"}),dataIndex:"version",align:"center",render:function(g){return"v"+g}},{title:T.formatMessage({id:"rule.module.text.user.name"}),dataIndex:"userName",align:"center"},{title:T.formatMessage({id:"common.table.columns.rule.updateTime"}),dataIndex:"gmtModified",align:"center"},{title:T.formatMessage({id:"cloudAccount.extend.title.cloud.operate"}),dataIndex:"operate",align:"center",valueType:"option",render:function(g,D){return(0,b.jsx)(w.ZP,{type:"link",onClick:function(){return te(D)},children:T.formatMessage({id:"common.button.text.rollback"})})}}],ne=function(){var R=s()(l()().mark(function g(D){var p,j,K,i;return l()().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return K={page:D.current,size:D.pageSize,ruleId:B==null?void 0:B.ruleId},A.next=3,(0,o.queryRegoList)(n()({},K));case 3:return i=A.sent,A.abrupt("return",{data:(i==null||(p=i.content)===null||p===void 0?void 0:p.data)||[],success:(i==null?void 0:i.code)===200||!1,total:(i==null||(j=i.content)===null||j===void 0?void 0:j.total)||0});case 5:case"end":return A.stop()}},g)}));return function(D){return R.apply(this,arguments)}}();return(0,b.jsxs)(F.Z,{title:T.formatMessage({id:"rule.extend.text.historical.records"}),width:"52%",destroyOnClose:!0,open:S,onClose:L,children:[x,(0,b.jsx)(_.Z,{search:!1,scroll:{x:!0},options:!1,rowKey:"id",columns:N,actionRef:ee,request:ne,pagination:{showQuickJumper:!1,showSizeChanger:!0,defaultPageSize:10,defaultCurrent:1},expandable:{expandRowByClick:!0,expandedRowRender:function(g){return(0,b.jsx)(I.Z,{direction:"column",gutter:[0,16],children:!(0,U.isEmpty)(g.ruleRego)&&(0,b.jsxs)(I.Z,{ghost:!0,children:[(0,b.jsx)("p",{children:T.formatMessage({id:"rule.module.text.info"})}),(0,b.jsx)(P.mi,{editorKey:"regoMsgEditor",value:g.ruleRego,editorStyle:{height:"280px",maxHeight:"280px"}})]})})},rowExpandable:function(g){return!(0,U.isEmpty)(g.ruleRego)}}})]})};v.Z=y},61194:function(M,v){"use strict";v.Z={floatButton:"floatButton___c4Q61",ruleEditPageContainer:"ruleEditPageContainer___JtP7R",stepListMain:"stepListMain___MjGkn",stepsWrap:"stepsWrap___GXD6m",contentMainTransparent:"contentMainTransparent___KcrOp",contentMain:"contentMain___zT9JY",ruleEditPageContainerSpecial:"ruleEditPageContainerSpecial___JGb_t",rulePageContainer:"rulePageContainer___p2US0",customFilterCard:"customFilterCard___A5TQf",customTitle:"customTitle___k1LUC",cleanBlock:"cleanBlock___et5AN",dimBlock:"dimBlock___EvyJb",lineBreak:"lineBreak___Oybab"}},64599:function(M,v,e){var E=e(96263);function n(r,l){var a=typeof Symbol!="undefined"&&r[Symbol.iterator]||r["@@iterator"];if(!a){if(Array.isArray(r)||(a=E(r))||l&&r&&typeof r.length=="number"){a&&(r=a);var s=0,c=function(){};return{s:c,n:function(){return s>=r.length?{done:!0}:{done:!1,value:r[s++]}},e:function(I){throw I},f:c}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var f=!0,P=!1,o;return{s:function(){a=a.call(r)},n:function(){var I=a.next();return f=I.done,I},e:function(I){P=!0,o=I},f:function(){try{!f&&a.return!=null&&a.return()}finally{if(P)throw o}}}}M.exports=n,M.exports.__esModule=!0,M.exports.default=M.exports}}]);
